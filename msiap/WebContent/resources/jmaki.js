var _globalScope=this;function Jmaki(){this.version=".9.4.1";this.debugGlue=false;this.debug=false;var _1=this;var _2=[];var _3=[];this.loaded=false;this.initialized=false;this.webRoot="";this.resourcesRoot="resources";this.extensions=[];this.Map=function(){var _4={};this.keys=function(){var o={};var _6=[];for(var _i in _4){if(typeof o[_i]=="undefined"){_6.push(_i);}}return _6;};this.put=function(_8,_9){_4[_8]=_9;};this.get=function(_a){return _4[_a];};this.remove=function(_b){delete _4[_b];};this.clear=function(){delete _4;_4={};};};this.attributes=new this.Map();var _c=new this.Map();this.subscribe=function(_d,_l){var _f=_c.get(_d);if(!_f){_f=[];_c.put(_d,_f);}for(var i in _f){if(i==_l){return;}}_f.push(_l);};this.unsubscribe=function(_11,_12){var _13=_c.get(_11);if(_13){for(var i=0;i<_13.length;i++){if(_13[i]==_12){_13.splice(i,1);break;}}}};this.publish=function(_15,_16,_17,_18){if(typeof _15=="undefined"||typeof _16=="undefined"){return;}var _19=_c.get(_15);if(_1.debugGlue){var _me=_16;if(typeof _16=="object"){var _m=[];for(var _o in _16){_m.push(_o+" : "+_16[_o]);}if(_m.length>0){_me="{"+_m.join(" , ")+"}";}else{_me="{}";}}_1.log("<span style='color:red'>Publish </span> : Topic:"+_15+" message: "+_me);}if(!_19){_19=[];_c.put(_15,_19);}for(var _1d=0;_1d<_19.length;_1d++){if(typeof _19[_1d]=="function"){_19[_1d](_16);}}if(_1.debugGlue&&_19.length>0){_1.log("<span style='color:green'>Point to Point Pubish match</span> : Topic:"+_15+" listeners : "+_19.length);}if(_1.config&&_1.config.glue&&_1.config.glue.listeners){for(var _l=0;_l<_1.config.glue.listeners.length;_l++){var _1f=_1.config.glue.listeners[_l];if((_1f.topic instanceof RegExp&&_1f.topic.test(_15))||(_1f.topic==_15)||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(_1f.topic.length-1)=="*"&&(_15.indexOf(_1f.topic.substring(0,_1f.topic.length-1))==0)&&_15.substring(0,_1f.topic.length-1)==_1f.topic.substring(0,_1f.topic.length-1))||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(0)=="*"&&(_15.indexOf(_1f.topic.substring(1,_1f.topic.length))!=-1)&&_15.substring(_15.indexOf(_1f.topic.substring(1,_1f.topic.length)),_15.length)==_1f.topic.substring(1,_1f.topic.length))||(typeof _1f.topic.charAt=="function"&&_1f.topic.charAt(0)=="*"&&_1f.topic.charAt(_1f.topic.length-1)=="*"&&_15.indexOf(_1f.topic.substring(1,_1f.topic.length-1))!=-1)){if(_1.debugGlue){_1.log("<span style='color:green'>Publish Match</span> : Topic:"+_15+" listener: "+_1f);}if(_1f.action=="call"&&_1f.target){var _20;if(_1f.target.functionName){_20=_1.findObject(_1f.target.object);if(typeof _20=="function"){myo=new _20;}else{if(_20){myo=_20;}else{if(_1.debugGlue){_1.log("Publish Error :  Object found: "+_1f.target.object);}}}if(typeof myo!="undefined"&&typeof myo[_1f.target.functionName]=="function"){myo[_1f.target.functionName].call(_globalScope,_16);}else{if(_1.debugGlue){_1.log("Publish Error : function "+_1f.target.functionName+" not found on object "+_1f.target.object);}}}else{if(_1f.target.functionHandler){_1f.target.functionHandler.call(_globalScope,_16);}else{if(_1.debugGlue){_1.log("Publish Error : no fuctionName or functionHandler specified on listener mapped to "+_15);}}}}}else{if(_1.config.glue.listeners[_l].action=="forward"){var _21=_1.config.glue.listeners[_l].topics;for(var ti=0;ti<_21.length;ti++){if(_21[ti]!=_15){_1.publish(_21[ti],_16);}}}}}}var bd=true;if(typeof _17!="undefined"){bd=_17;}if(bd&&window.frames.length>0){for(var i=0;i<window.frames.length;i++){if(window.frames[i].jmaki){window.frames[i].jmaki.publish("/global"+_15,_16,true,false);}}}if(window!=window.top){var bu=true;if(typeof _18!="undefined"){bu=_18;}if(bu&&window.parent.jmaki){window.parent.jmaki.publish("/global"+_15,_16,false,true);}}};this.addLibraries=function(_26,_cb,_28){if(_26.length<=0){if(typeof _cb=="function"){_cb();return;}}if(typeof _28=="undefined"){_28=new _1.Map();}var _29=new Date().getMilliseconds();var _2a=_26[_26.length-1];var _2b="c_script_"+_26.length+"_"+_29;var _2c=document.getElementsByTagName("head")[0];var e=document.createElement("script");e.start=_29;e.id=_2b;e.type="text/javascript";_2c.appendChild(e);var se=document.getElementById(_2b);_28.put(_2b,_2a);var _2f=function(_id){var t=document.getElementById(_id);if(t&&t.timeoutHandler){clearInterval(t.timeoutHandler.interval);delete t.timeoutHandler;}var _s=document.getElementById(_id);if(_s){_s.parentNode.removeChild(_s);}_28.remove(_id);var _33=_cb;if(_26.length-1>0){_26.pop();_1.addLibraries(_26,_cb,_28);}if(_28.keys().length==0){if(typeof _cb!="undefined"){var _34=0;delete _28;setTimeout(function(){_33();},0);}}};if(/MSIE/i.test(navigator.userAgent)){se.onreadystatechange=function(){if(this.readyState=="loaded"){var _id=_2b;_2f(_id);}};document.getElementById(_2b).src=_2a;}else{if(se.addEventListener){var _36=function(_id){var _c=0;var _39=this;this.interval=setInterval(function(){if(_c>2){clearInterval(_39.interval);_2f(_id);}else{_c++;}},250);};se.timeoutHandler=new _36(_2b);se.addEventListener("load",function(){var _id=_2b;_2f(_id);},true);}setTimeout(function(){document.getElementById(_2b).src=_2a;},0);}se=null;_2c=null;};this.getXHR=function(){if(window.XMLHttpRequest){return new XMLHttpRequest();}else{if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}}};function handleAjaxError(_m,_r,_3d){if(_3d.onerror){_3d.onerror(_m,_r);}else{_1.log("jMaki.doAjax Error: "+_m);}}this.doAjax=function(_3e){if(typeof _3e=="undefined"||!_3e.url){_1.log("jmaki.doAjax: url required");return;}var _3f=this.getXHR();var _40="GET";var _41=true;var _42;var _c=false;if(_3e.timeout){setTimeout(function(){if(!_c){_c=true;if(_3f.readyState>4){if(_3f.abort){_3f.abort();}}handleAjaxError("Request timed out",_3f,_3e);return;}},_3e.timeout);}if(typeof _3e.asynchronous!="undefined"){_41=_3e.asynchronous;}if(_3e.method){_40=_3e.method;}if(typeof _3e.callback=="function"){_42=_3e.callback;}var _44=null;if(_3e.body){_44=_3e.body;}else{if(_3e.content){_44="";for(var l in _3e.content){_44=_44+l+"="+encodeURIComponent(_3e.content[l])+"&";}}}if(_41==true&&!_c){_3f.onreadystatechange=function(){if(_3f.readyState==4&&!_c){_c=true;if((_3f.status==200||_3f.status==0)&&_42){_42(_3f);}else{if(!_c){handleAjaxError("jmaki.doAjax error communicating with "+_3e.url,_3f,_3e);}}return;}};}try{if(!_c){_3f.open(_40,_3e.url,_41);}}catch(e){handleAjaxError("jmaki.doAjax error creating xmlhttprequest",_3f,_3e);return;}if(_3e.headers&&_3e.headers.length>0){for(var _h=0;_h<_3e.headers.length;_h++){_3f.setRequestHeader(_3e.headers[_h].name,_3e.headers[_h].value);}}if(_3e.method){_40=_3e.method;if(_40.toLowerCase()=="post"){if(!_3e.contentType){_3f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");}}}if(_3e.contentType){_3f.setRequestHeader("Content-Type",_3e.contentType);}try{if(!_c){_3f.send(_44);}}catch(e){handleAjaxError("Error sendong body of xmlhttprequest",_3f,_3e);return;}if(!_c&&_41==false){_c=true;try{if(_3f.status==200){if(_42){_42(_3f);}}else{handleAjaxError("Error communicating with external service",_3f,_3e);}}catch(e){handleAjaxError("Error communicating with external service",_3f,_3e);}return;}};this.addType=function(_47){var _48=null;if(_1.config&&_1.config.types){for(var _i=0;_i<_1.config.types.length;_i++){if(_47==_1.config.types[_i].id){_48=_1.config.types[_i];break;}}if(_48){if(_48.preload){_globalScope.eval(_48.preload);}var _4a=[];for(var _i=0;_i<_48.libs.length;_i++){if(!this.isScriptLoaded(this.webRoot+_48.libs[_i])){_4a.push(this.webRoot+_48.libs[_i]);}}var _cb;if(_48.postload){_cb=function(){var _4d=_48.postload;_globalScope.eval(_4d);};}_1.addLibraries(_4a,_cb);}}};this.addLibrary=function(lib,cb){var _50=[];_50.push(lib);return _1.addLibraries(_50,cb);};this.addWidget=function(_51){_3.push(_51);if(this.loaded){this.loadWidget(_51);}};this.addExtension=function(ext){_1.extensions.push(ext);};this.bootstrapWidgets=function(){_1.loaded=true;for(var l=0;l<_3.length;l++){this.loadWidget(_3[l]);}};this.loadExtensions=function(){for(var l=0;l<_1.extensions.length;l++){this.loadExtension(_1.extensions[l]);}};this.writeScript=function(_s,_id){if(_1.loaded==true){if(document.getElementById(_id)){document.getElementById(_id).innerHTML="Attempt to write a script that can not be dynamically load widget with  id "+_id+". Consider using the widget in an iframe.";}}else{document.write("<script src='"+_s+"'></script>");}};this.loadStyle=function(_57){var _58=document.createElement("link");_58.type="text/css";_58.rel="stylesheet";if(_57[0]=="/"){_57=_1.webRoot+_57;}_58.href=_57;if(document.getElementsByTagName("head").length==0){var _59=document.createElement("head");document.documentElement.insertBefore(_59,document.documentElement.firstChild);}document.getElementsByTagName("head")[0].appendChild(_58);};this.replaceStyleClass=function(_5a,_5b,_5c){var _5d=this.getElementsByStyle(_5b,_5a);for(var i=0;i<_5d.length;i++){if(_5d[i].className.indexOf(" ")!=-1){var _5f=_5d[i].className.split(" ");for(var ci in _5f){if(_5f[ci]==_5b){_5f[ci]=_5c;}}_5d[i].className=_5f.join(" ");}else{if(_5d[i].className==_5b){_5d[i].className=_5c;}}}};this.getElementsByStyle=function(_61,_62){var _63=[];if(typeof _62!="undefined"){var _64=_62;if(typeof _62=="string"){_64=document.getElementById(_62);}_63=this.getAllChildren(_64,[]);}else{_63=(document.all)?document.all:document.getElementsByTagName("*");}var _65=[];for(var i=0;i<_63.length;i++){if(_63[i].className.indexOf(" ")!=-1){var cn=_63[i].className.split(" ");for(var ci=0;ci<cn.length;ci++){if(cn[ci]==_61){_65.push(_63[i]);}}}else{if(_63[i].className==_61){_65.push(_63[i]);}}}return _65;};this.getAllChildren=function(_69,_6a){var _nc=_69.childNodes;for(var l=0;l<_nc.length;l++){if(_nc[l].nodeType==1){_6a.push(_nc[l]);if(_nc[l].childNodes.length>0){this.getAllChildren(_nc[l],_6a);}}}return _6a;};this.loadExtension=function(_6d){var _6e="jmaki.extensions."+_6d.name+".Extension";var con=this.findObject(_6e);if(typeof con!="function"){jmaki.log("Could not find widget constructor for: "+_6e+". Please make sure the extension constructor is properly defined.");}else{var ex=new con(_6d);if(ex.postLoad){ex.postLoad.call(_globalScope);}}};this.loadWidget=function(_71){if(_1.attributes.get(_71.uuid)!=null){return;}var _72="jmaki.widgets."+_71.name+".Widget";var con=this.findObject(_72);if(typeof con!="function"){logError("Could not find widget constructor for: "+_72+". Please make sure the widget constructor is properly defined.",document.getElementById(_71.uuid));}var _74;if((typeof _71.value=="string")&&_71.value.indexOf("@{")==0){var _vw=/[^@{].*[^}]/.exec(_71.value);_71.value=_1.findObject(new String(_vw));}var _76=_71.uuid;if(/MSIE/i.test(navigator.userAgent)){var _77=_71.uuid;var _78=null;if(window.onerror){_78=window.onerror;}var eh=function(_7a,url,_7c){var _7d=_77;logWidgetError(_72,_7d,url,_7c,_7a,document.getElementById(_7d));};window.onerror=eh;_74=new con(_71);window.onerror=null;if(_78){window.onerror=_78;}}else{if(typeof con=="function"){try{_74=new con(_71);}catch(e){var _7e="unknown";var _7f=null;if(e.lineNumber){_7e=e.lineNumber;}if(e.message){_7f=e.message;}if(_1.debug){logWidgetError(_72,_71.uuid,_71.script,_7e,_7f,document.getElementById(_71.uuid));return;}}}else{if(typeof con=="undefined"){logError("Unable to find widget constructor "+_72+" check log and make sure constructor is defined.",document.getElementById(_71.uuid));return;}}}if(typeof _74=="object"){_1.attributes.put(_71.uuid,_74);if(typeof _74.postLoad=="function"){_74.postLoad();}if(_71.subscribe&&_71.subscribe.length){for(var _wi=0;_wi<_71.subscribe.length;_wi++){var _t=_71.subscribe[_wi].topic;var _m=_71.subscribe[_wi].handler;var _h=null;if(_m.indexOf("@{")==0){var _hw=/[^@{].*[^}]/.exec(_m);_h=_1.findObject(new String(_hw));}else{if(_74[_m]){_h=_74[_m];}}if(_h!=null){_1.addGlueListener(_71.subscribe[_wi].topic,_h);}}}_1.publish("/jmaki/runtime/widget/loaded",_74);}else{logError("Unable to create an instance of "+_72+". See the error log for more details.",document.getElementById(_71.uuid));}};function logWidgetError(_85,_86,url,_88,_m,div){var _8b="<span>Error loading "+_85+" : id="+_86+"<br>"+"Script: "+url+" (line:"+_88+")."+"<br>Message: "+_m+"</span>";logError(_8b,div);}function logError(_8c,div){if(div==null||typeof div.className=="undefined"){div=document.createElement("div");document.body.appendChild(div);}div.className="";div.style.color="red";div.innerHTML=_8c;}this.getWidget=function(id){return _1.attributes.get(id);};this.clearWidgets=function(_8f){if(typeof _8f=="undefined"){var _k=_1.attributes.keys();for(var l=0;l<_k.length;l++){if(typeof _1.attributes.get(_k[l]).destroy!="undefined"&&typeof _1.attributes.get(_k[l]).destroy=="function"){_1.attributes.get(_k[l]).destroy();}_1.attributes.remove(_k[l]);}_1.loaded=false;_3=[];}else{var _ws=_1.getAllChildren(_8f,[]);for(var l=0;l<_ws.length;l++){if(_ws[l].id&&_1.attributes.get(_ws[l].id)&&typeof _1.attributes.get(_ws[l].id).destroy=="function"){_1.attributes.get(_ws[l].id).destroy();var _p=document.getElementById(_ws[l].id);_p.parentNode.removeChild(_p);}_1.attributes.remove(_ws[l].id);}}};this.addGlueListener=function(l,t){if(!_1.config){_1.config={};}if(!_1.config.glue){_1.config.glue={};}if(!_1.config.glue.listeners){_1.config.glue.listeners=[];}if(typeof l=="object"&&!(l instanceof RegExp)){if(l.topic){l.topic=l.topic.replace(/^\s+|\s+$/g,"");}if(l.topicRegExp){l.topic=new RegExp(l.topicRegExp);}lis=l;}else{if(typeof t=="string"){lis={};if(l.topicRegExp){lis.topic=new RegExp(l.topicRegExp);}else{lis.topic=l;}lis.target={};var _is=t.split(".");lis.action="call";lis.target.functionName=_is.pop();lis.target.object=_is.join(".");}else{if(typeof t=="function"){lis={};if(l.topicRegExp){lis.topic=new RegExp(l.topicRegExp);}else{lis.topic=l;}lis.target={};lis.action="call";lis.target.functionHandler=t;}else{_1.log("don't know what to do with "+l);}}}if(typeof lis!="undefined"){_1.config.glue.listeners.push(lis);}};this.extend=function(_98,_99){_98.prototype=new _99();_98.prototype.constructor=_98;_98.superclass=_99.prototype;for(i in _99){_98.prototype[i]=_99[i];}};this.log=function(_9a,_9b){if(!_1.debug){return;}if(!_1.ld){var ld=document.createElement("div");ld.style.border="1px solid #000000";ld.style.fontSize="12px";ld.style.position="absolute";ld.style.zIndex="999";ld.style.bottom="0px";ld.style.background="yellow";ld.style.right="0px";ld.style.width="400px";ld.style.height="200px";ld.style.overflowY="auto";document.body.appendChild(ld);_1.ld=ld;}var lm=document.createElement("div");lm.innerHTML=_9a;_1.ld.appendChild(lm);};this.initialize=function(){if(!_1.config){_1.config={};}if(!_1.config.glue){_1.config.glue={};}var req=this.getXHR();try{req.open("GET",this.webRoot+this.resourcesRoot+"/config.json",false);req.send(null);}catch(e){}if(req.readyState==4){if(req.status==200){if(req.responseText==""){return;}var obj=eval("("+req.responseText+")");if(obj.config){_1.config.theme=obj.config.theme;if(obj.config.glue.timers){_1.addTimers(obj.config.glue.timers);}if(obj.config.gluelisteners){for(var gl=0;gl<obj.config.glue.listeners.length;gl++){_1.addGlueListener(obj.config.glue.listeners[gl]);}}}}}postInitialize();};var _a1=[];this.namespace=function(_a2,_a3){var _a4=_a2.split(".");var _a5=_globalScope[_a4[0]];if(typeof _a5=="undefined"){_globalScope[_a4[0]]=_a5={};}for(var ii=1;ii<_a4.length;ii++){if(typeof _a5[_a4[ii]]!="undefined"){_a5=_a5[_a4[ii]];}else{_a5[_a4[ii]]={};_a5=_a5[_a4[ii]];}}if(typeof _a3=="object"){_a5=_a3;}return _a5;};this.findObject=function(_a7){var _a8=_a7.split(".");var _a9=_globalScope[_a8[0]];var _aa=true;if(typeof _a9!="undefined"){for(var ii=1;ii<_a8.length;ii++){var _lp=_a8[ii];if(_lp.indexOf("()")!=-1){var _ns=_lp.split("()");if(typeof _a9[_ns[0]]=="function"){var _fn=_a9[_ns[0]];return _fn.call(_globalScope);}}if(typeof _a9[_lp]!="undefined"){_a9=_a9[_lp];_aa=true;}else{_aa=false;break;}}if(_aa){return _a9;}}return null;};this.Timer=function(_af,_b0){var _b1=this;this.args=_af;var _b2;this.processTopic=function(){for(var ti=0;ti<_af.topics.length;ti++){_1.publish(_af.topics[ti],{topic:_af.topics[ti],type:"timer",src:_b1,timeout:_af.to});}};this.processCall=function(){if(!_b2){var _b4=_1.findObject(_af.on);if(typeof _b4=="function"){_b2=new _b4();}else{if(typeof _b4=="object"){_b2=_b4;}}}if((_b2&&typeof _b2=="object")){if(typeof _b2[_af.fn]=="function"){_b2[_af.fn]({type:"timer",src:_b1,timeout:_af.to});}}};this.run=function(){if(_b0){_b1.processCall();}else{_b1.processTopic();}_globalScope.setTimeout(_b1.run,_af.to);};};this.addTimer=function(_b5){var _b6=[];_b6.push(_b5);this.addTimers(_b6);};this.addTimers=function(_b7){if(typeof _b7!="undefined"){for(var _l=0;_l<_b7.length;_l++){var _b9=_b7[_l];if(_b9.action=="call"&&_b9.target!="undefined"&&_b9.target.object!="undefined"&&_b9.target.functionName!="undefined"&&typeof _b9.timeout!="undefined"){var _ba={on:_b9.target.object,fn:_b9.target.functionName,to:_b9.timeout};var _bb=new _1.Timer(_ba,true);_a1.push(_bb);_bb.run();}else{if(_b7[_l].action=="publish"){var _bc={topics:_b7[_l].topics,to:_b9.timeout};var _bd=new _1.Timer(_bc,false);_a1.push(_bd);_bd.run();}}}}};function postInitialize(){if(_1.initialized){return;}else{_1.initialized=true;}_1.publish("/jmaki/runtime/intialized",{});_1.loadExtensions();_1.publish("/jmaki/runtime/extensionsLoaded",{});_1.bootstrapWidgets();_1.publish("/jmaki/runtime/widgetsLoaded",{});if(_1.config&&_1.config.theme){var _be=_1.config.theme;if(!/(^http)/i.test(_be)){_be=_1.webRoot+_be;}_1.loadStyle(_be);}_1.publish("/jmaki/runtime/loadComplete",{});}this.filter=function(_bf,_c0){if(typeof _c0=="string"){var h=_1.findObject(_c0);return h.call(_globalScope,_bf);}else{if(typeof _c0=="function"){return _c0.call(_globalScope,_bf);}}};this.DContainer=function(_c2){var _c3=this;var _c4;var _c5;var ie=/MSIE/i.test(navigator.userAgent);if(typeof _c2.target=="string"){_c4=_c2.target;_c5=document.getElementById(target);}else{_c4=_c2.target.id;_c5=_c2.target;}if(typeof overflow!="undefined"&&_c5.style.overflow){_c5.style.overflow="true";}var _c7;this.url=null;var _c8=false;var _c9=false;if(_c2.autosize){_c8=true;_c9=true;}var _ca;var _cb;this.loadURL=function(_cc){if(typeof _cc!="undefined"){if(typeof _cc=="string"){_c3.url=_cc;}else{if(_cc.url){_c3.url=_cc.url;}}if(_c2.useIframe){_c3.iframe.src=_c3.url;}else{_1.injector.inject({url:_c3.url,injectionPoint:_c5});}}};function getPosition(_e){var pX=0;var pY=0;try{while(_e.offsetParent){pY+=_e.offsetTop;pX+=_e.offsetLeft;_e=_e.offsetParent;}}catch(e){}return {x:pX,y:pY};}this.resize=function(){var pos=getPosition(_c5);if(_c8||_c9){if(!_c5.parentNode){return;}var pos=getPosition(_c5);if(_c5.parentNode.nodeName=="BODY"){if(window.innerHeight){_cb=window.innerHeight-pos.y-40;_ca=window.innerWidth-20;}else{var _d2=_c5.parentNode;while(_d2!=null&&(_d2.clientHeight==0||typeof _d2.clientWidth=="undefined")){_d2=_d2.parentNode;}if(_d2==null){_ca=400;}else{_ca=_d2.clientWidth-20;_cb=_d2.clientHeight-pos.y-15;}}}else{var _d3=_c5.parentNode;while(_d3!=null&&(_d3.clientHeight==0||typeof _d3.clientWidth=="undefined")){_d3=_d3.parentNode;}if(_d3==null){_ca=400;}else{_ca=_d3.clientWidth;_cb=_d3.clientHeight;}}if(_c8){if(_cb<0){_cb=320;}_c5.style.height=_cb+"px";}if(_c9){_c5.style.width=_ca+"px";}}else{_c5.style.width=_ca+"px";_c5.style.height=_cb+"px";}if(_cb<0){_cb=320;}if(_ca<0){_ca=500;}if(_c2.useIframe){if(_c3.iframe){_c3.iframe.style.height=_cb+"px";_c3.iframe.style.width=_ca+"px";}}_c7=document.body.clientWidth;};function init(){if(window.attachEvent){window.attachEvent("onresize",layout);}else{if(window.addEventListener){window.addEventListener("resize",layout,true);}}if(_c2.startWidth){_ca=Number(_c2.startWidth);_c5.style.width=_ca+"px";}else{_ca=_c5.clientWidth;_c9=true;}if(_c2.startHeight){_cb=Number(_c2.startHeight);}else{_cb=_c5.clientHeight;_c8=true;}if(_cb<=0){_cb=320;}_c5.style.height=_cb+"px";if(_c2.useIFrame&&_c3.iframe){_c3.iframe.style.height=_cb+"px";}_1.subscribe(_c2.topic,_c3.loadURL);_c3.resize();if(_c2.url&&!_c2.useIframe){_c3.loadURL(_c2.url);}}var _d4=false;var _d5=0;function layout(){if(!ie){_c3.resize();return;}if(_c7!=document.body.clientWidth&&!_d4){if(!_d4){_d4=true;setTimeout(layout,500);}}else{if(_d4&&document.body.clientWidth==_d5){_d4=false;_c3.resize();}else{if(_d4){_d5=document.body.clientWidth;setTimeout(layout,500);}}}}if(_c2.useIframe&&_c2.useIframe==true){var _d6="";if(_c2.url){_d6="src='"+_c2.url+"'";}var _d7="<IFRAME ID='"+_c4+"_iframe' "+_d6+" FRAMEBORDER=0 SCROLLING="+((!_c2.overflow)?"NO":"YES")+"></IFRAME>";_c5.innerHTML=_d7;var _t=setInterval(function(){if(document.getElementById(_c4+"_iframe")){clearInterval(_t);_c3.iframe=document.getElementById(_c4+"_iframe");setTimeout(function(){init();},0);}},5);}else{init();}};this.destroy=function(){if(window.attachEvent){window.dettachEvent("onresize",layout);}else{if(window.addEventListener){window.removeEventListener("resize",layout,true);}}};this.Injector=function(){var _d9=new Date().getMilliseconds();var _da=this;var _db=false;var _dc=[];var _dd=[];this.inject=function(_de){if(_dd.length==0&&!_db){inject(_de);}else{_dd.push(_de);}};function inject(_df){_db=true;_1.doAjax({method:"GET",url:_df.url,asynchronous:false,callback:function(req){if(req.readyState==4){getContent(req.responseText,_df);var _e1;if(typeof _df.injectionPoint=="string"){_e1=document.getElementById(_df.injectionPoint);if(!document.getElementById(_df.injectionPoint)){var _t=setInterval(function(){if(document.getElementById(_df.injectionPoint)){clearInterval(_t);_e1=document.getElementById(_df.injectionPoint);setTimeout(function(){processTask(_e1,_df);},0);}},25);}else{processTask(_e1,_df);}}else{processTask(_df.injectionPoint,_df);}}}});}function processTask(_e3,_e4){_1.clearWidgets(_e3);var _id="injector_"+_d9;var _e6=_e4.content+"<div id='"+_id+"'></div>";_e3.innerHTML=_e6;var _t=setInterval(function(){if(document.getElementById(_id)){clearInterval(_t);try{_da.loadScripts(_e4,processNextTask);}catch(e){_e3.innerHTML="<span style='color:red'>"+e.message+"</span>";}}},25);}function processNextTask(){if(_dd.length>0){var _t=_dd.shift();inject(_t);}_db=false;}this.get=function(p){var _ea;_1.doAjax({method:"GET",url:p.url,asynchronous:false,callback:function(req){_ea=getContent(req.responseText);}});return _ea;};function getContent(_ec,_ed){_ed.embeddedScripts=[];_ed.embeddedStyles=[];_ed.scriptReferences=[];_ed.styleReferences=[];var _t=_ec;var _ef="";var _f0=document.getElementsByTagName("script");var _f1=document.getElementsByTagName("link");while(_t.indexOf("<script")!=-1){var _f2=_t.indexOf("<script");var _f3=_t.indexOf("src=",(_f2));var _f4=_t.indexOf(">",_f2);var end=_t.indexOf("</script>",(_f2))+"</script>".length;if(_f2!=-1&&_f3!=-1){var _f6;var _f7=_f3+5;var _f8=_t.substring(_f3+4,(_f3+5));var _f9=_t.indexOf("\"",(_f7+1));_f9=_t.indexOf(_f8,(_f7+1));if(_f3<_f4){_f6=_t.substring(_f7,_f9);var _fa=false;for(var i=0;i<_f0.length;i++){if(typeof _f0[i].src){if(_f0[i].src==_f6){_fa=true;break;}}}if(!_fa){_ed.scriptReferences.push(_f6);}}}var _fc=_f4+1;var _fd=_t.substring(_fc,end-"</script>".length);if(_fd.length>0){_ed.embeddedScripts.push(_fd);}_t=_t.substring(0,_f2)+_t.substring(end,_t.length);_f9=-1;}while(_t.indexOf("<style")!=-1){var _fe=_t.indexOf("<style");var _ff=_t.indexOf(">",_fe);var end=_t.indexOf("</style>",(_fe));var _101=_ff+1;var _102=_t.substring(_101,end);if(_102.length>0){_ed.embeddedStyles.push(_102);}_t=_t.substring(0,_fe)+_t.substring(end+"</style>".length,_t.length);}while(_t.indexOf("<link")!=-1){var _103=_t.indexOf("<link");var _104=_t.indexOf("href=",(_103));var _105=_t.indexOf(">",_103)+1;if(_103!=-1&&_104!=-1){var _106;var _107=_104+6;var _108=_t.substring(_104+5,(_104+6));var _109=_t.indexOf(_108,(_107+1));if(_104<_105){styleSourceName=_t.substring(_107,_109);var _10a=false;for(var i=0;i<_f1.length;i++){if(typeof _f1[i].src!="undefined"){if(_f1[i].src==styleSourceName){_10a=true;}}}if(!_10a){_ed.styleReferences.push(styleSourceName);}}_t=_t.substring(0,_103)+_t.substring(_105,_t.length);}}var head=document.getElementsByTagName("head")[0];for(var loop=0;loop<_ed.styleReferences.length;loop++){var link=document.createElement("link");link.href=_ed.styleReferences[loop];link.type="text/css";link.rel="stylesheet";head.appendChild(link);}var _10f;if(_ed.embeddedStyles.length>0){_10f=document.createElement("style");_10f.type="text/css";var _110;for(var loop=0;loop<_ed.embeddedStyles.length;loop++){_110=_110+_ed.embeddedStyles[loop];}if(document.styleSheets[0].cssText){document.styleSheets[0].cssText=document.styleSheets[0].cssText+_110;}else{_10f.appendChild(document.createTextNode(_110));head.appendChild(_10f);}}_ed.content=_t;}this.loadScripts=function(task,_113){var _114=function(){for(var loop=0;loop<task.embeddedScripts.length;loop++){var _116=task.embeddedScripts[loop];eval(_116);if(loop==(task.embeddedScripts.length-1)){if(typeof _113!="undefined"){_113();}return;}}if(task.embeddedScripts.length==0&&typeof _113!="undefined"){_113();}};if(task.scriptReferences.length>0){return _1.addLibraries(task.scriptReferences.reverse(),_114);}else{_114();}return true;};};this.injector=new this.Injector();}if(!jmaki){var jmaki=new Jmaki();jmaki.widgets={};var oldLoad=window.onload;window.onload=function(){if(!jmaki.initialized){jmaki.initialize();}else{jmaki.bootstrapWidgets();return;}if(typeof oldLoad=="function"){oldLoad();}};}